const wait_for_element=function(e,t,a,o){new MutationObserver((function(i){$(e).length&&(a(e,t),o&&observer.disconnect())})).observe(document.getElementById(t),{childList:!0,subtree:!0})},copy_to_clipboard=function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},color_cell=function(e,t,a,o,i){return t&&t.length&&(o&&o.length||i&&i.length)?e.defaultGridColumnOptions={cellTemplate:'<div style="background: '+o+"; color: "+i+';" title="'+a+'">'+t+"</div>"}:e.defaultGridColumnOptions={cellTemplate:'<span title="'+a+'">'+t+"</span>"},e};var init_page=function(){apex.theme42.util.configAPEXMsgs({autoDismiss:!0,duration:3e3}),apex.message.setThemeHooks({beforeShow:function(e,t){var a=$("#APEX_ERROR_MESSAGE");a.html($("<textarea />").html(a.html()).text()),e===apex.message.TYPE.SUCCESS&&setTimeout((()=>{apex.message.hidePageSuccess()}),3e3)},beforeHide:function(e,t){}}),fix_grid_toolbars(),fix_grid_save_button();var e=parseInt(apex.item("P0_AJAX_PING_INTERVAL").getValue());apex.item("P0_AJAX_PING_INTERVAL").node&&e>0&&function t(a){setTimeout((function(){e>0&&(console.log("CALL AJAX_PING"),apex.server.process("AJAX_PING",{},{async:!0,dataType:"json",success:function(t){t.message&&("SUCCESS"==t.status?apex.message.showPageSuccess(t.message):"WARNING"!=t.status&&"ERROR"!=t.status||(apex.message.showErrors([{type:apex.message.TYPE.ERROR,location:["page"],message:t.message,unsafe:!1}]),"ERROR"==type&&t.message.includes("INTERNAL_ERROR")&&t.message.includes("SESSION")&&(e=0)))}})),t(a)}),1e3*e)}()},fix_grid_toolbars=function(){$(".a-IG").each((function(){var e=$(this).parent(),t=e.attr("id");e.hasClass("ORIGINAL")||fix_grid_toolbar(t)}))},fix_grid_toolbar=function(e){console.group("FIX_GRID_TOOLBAR",e);var t=$("#"+e),a=apex.region(e).widget(),o=a.interactiveGrid("getActions"),i=a.interactiveGrid("getToolbar"),n=$.apex.interactiveGrid.copyDefaultToolbar(),r=(n.toolbarFind("actions1"),n.toolbarFind("actions2")),s=n.toolbarFind("actions3"),c=n.toolbarFind("actions4");o.hide("reset-report"),o.show("change-rows-per-page");for(var l=0;l<r.controls.length;l++){if("save"==(d=r.controls[l]).action){d.hot=!1,d.label="Save Changes";break}}for(l=0;l<s.controls.length;l++){var d;if("selection-add-row"==(d=s.controls[l]).action){d.icon="fa fa-plus",d.iconOnly=!0,d.label=" ";break}}t.hasClass("SAVE_ALL")&&(o.add({name:"SAVE_ALL",action:function(e,t){var a=e.delegateTarget.id.replace("_ig",""),o=apex.region(a).widget(),i=o.interactiveGrid("getViews","grid").model;console.log("CALL SAVE_ALL",a,o,i),i.forEach((function(e){try{""==i.getValue(e,"MARK_AS_CHANGED")&&i.setValue(e,"MARK_AS_CHANGED","Y ")}catch(e){}})),o.interactiveGrid("getActions").invoke("save"),o.interactiveGrid("getCurrentView").model.fetch()}}),r.controls.push({type:"BUTTON",label:"Save All Rows",id:"save_all_rows",icon:"",action:"SAVE_ALL"})),t.hasClass("SAVE_SELECTED")&&(o.add({name:"SAVE_SELECTED",action:function(e,t){var a,o=e.delegateTarget.id.replace("_ig",""),i=apex.region(o).widget(),n=i.interactiveGrid("getViews","grid").model,r=i.interactiveGrid("getViews").grid,s=i.interactiveGrid("getViews").grid.getSelectedRecords(),c=[];console.log("CALL SAVE_SELECTED",o,i,n);for(var l=0;l<s.length;l++)a=r.model.getRecordId(s[l]),c.push(a);n.forEach((function(e){for(var t=0;t<c.length;t++)if(c[t]==r.model.getRecordId(e))try{""==n.getValue(e,"MARK_AS_CHANGED")&&n.setValue(e,"MARK_AS_CHANGED","Y ")}catch(e){}})),i.interactiveGrid("getActions").invoke("save"),i.interactiveGrid("getCurrentView").model.fetch()}}),r.controls.push({type:"BUTTON",label:"Save Selected",id:"save_all_rows",icon:"",action:"SAVE_SELECTED"})),c.controls.push({type:"BUTTON",action:"refresh",label:"Refresh",icon:"",iconBeforeLabel:!0}),$("#apexDevToolbar.a-DevToolbar")&&c.controls.push({type:"BUTTON",action:"save-report",label:"Save as Default",icon:""}),n.defaultGridViewOptions={persistSelection:!0},i.toolbar("option","data",n),i.toolbar("refresh"),console.groupEnd()},fix_grid_save_button=function(){var e=new MutationObserver((function(e){e.forEach((function(e){var t=$(e.target);t.hasClass("is-active")&&t.parent().parent().find('button.a-Toolbar-item[data-action="save"]').addClass("is-active a-Button--hot")}))}));$.each($('.a-Toolbar-button[name="edit"]'),(function(t,a){$el=$(a),e.observe($el[0],{attributes:!0})}))},fold_grid_group=function(e,t,a){!function o(i){setTimeout((function(){$("#"+e+" table tbody tr button.a-Button.js-toggleBreak").each((function(){if(i>0){$x=$(this);var e=$x.parent().find(".a-GV-controlBreakLabel"),o=e.find(".a-GV-breakLabel").text(),n=e.find(".a-GV-breakValue").text();if(o.startsWith(t)&&n.trim()==a)return $x.click(),$x.blur(),$(window).scrollTop(0),void(i=0)}})),--i&&o(i)}),200)}(10)};